## Создание пользователя с помощью `adduser`

Linux предоставляет команду `adduser`, которая является дружественным вариантом команды `useradd`. Она позволяет легко и быстро создавать новых пользователей:

### Основной синтаксис

```bash
adduser имя_пользователя
```

### Что происходит при создании пользователя?

1. Создаётся новая запись в файле `/etc/passwd` для пользователя.
2. Генерируется домашняя директория (например, `/home/имя_пользователя`).
3. Настраиваются базовые параметры (например, shell по умолчанию).
4. Вас попросят ввести пароль и дополнительную информацию (например, имя, номер телефона — но эти данные необязательны).

### Пример

Давайте создадим нового пользователя `dev_user`:

```bash
sudo adduser dev_user
```

После ввода этой команды вам предложат:

1. Указать пароль для пользователя.
2. Ввести дополнительную информацию, которую можно пропустить, просто нажав `Enter`.

### Проверка

Чтобы убедиться, что пользователь создан, можно просмотреть файл `/etc/passwd`:

```bash
cat /etc/passwd | grep dev_user
```

Вы увидите строку, содержащую информацию о пользователе `dev_user`.


## Настройка пользователя с помощью `usermod`

Когда пользователь уже создан, может возникнуть необходимость изменить его параметры. Например, сменить имя, указать другой shell или добавить в группу.

### Изменение имени пользователя

Сначала убедитесь, что пользователь не вошёл в систему. Затем выполните команду:

```bash
sudo usermod -l новое_имя старое_имя
```

Пример:

```bash
sudo usermod -l developer dev_user
```

Теперь пользователь `dev_user` будет называться `developer`. Однако его домашняя директория пока останется старой.

### Смена shell по умолчанию

Допустим, вам нужно изменить shell пользователя на `/bin/zsh`. Для этого выполните:

```bash
sudo usermod --shell /bin/zsh developer
```

Проверьте, что shell изменился, с помощью команды:

```bash
cat /etc/passwd | grep developer
```

### Изменение домашней директории

Если вы хотите, чтобы новый пользователь работал в другой домашней директории, сделайте следующее:

```bash
sudo usermod -d /новый/путь developer
```

Важно:

если директория ещё не существует, используйте опцию `-m`, чтобы она была создана и содержимое старой директории было перемещено:

```bash
sudo usermod -d /home/new_developer -m developer
```

## Управление паролями с помощью `passwd`

### Установка и смена пароля

Для установки (или смены) пароля пользователя применяется команда:

```bash
sudo passwd имя_пользователя
```

Пример:

```bash
sudo passwd developer
```

Система попросит вас дважды ввести новый пароль, чтобы убедиться, что вы не ошиблись.

### Принудительная смена пароля при следующем входе

Такое может пригодиться, если вы создаёте пользователей и хотите, чтобы они сами установили свой пароль при первом входе:

```bash
sudo passwd -e developer
```

После этого пользователь `developer`, войдя в систему, увидит сообщение о необходимости сменить пароль.

## Маска по умолчанию: `umask`

Когда вы создаете файл, права доступа для него определяются системой. Например, права могут быть `rw-r--r--`. Но откуда они берутся? Ответ: от команды `umask`.

### Что такое `umask`?

`umask` определяет, какие права **не будут установлены** для новых файлов.

Например:

- Базовый набор прав для файла: `666` (нет выполнения).
- Маска: `022`.
- Итоговые права: `644` (`666 - 022`).

Команды:

- Посмотреть текущую маску: `umask`
- Установить новую маску: `umask 0022`

Пример:

```text
# Установка маски, чтобы новые файлы имели rw-rw-r--
umask 0002
```