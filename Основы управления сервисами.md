
## Основы управления сервисами с помощью `systemctl`

### Что такое `systemctl`?

Начнём с того, что `systemctl` — это основная команда для управления сервисами в системах, использующих **systemd**. Если ваша система работает на современном Linux-дистрибутиве (например, Ubuntu, Fedora или CentOS), скорее всего, она как раз использует `systemd`.

**Основные функции**

1. **Запуск сервиса**: начать работу службы, если она отключена.
2. **Остановка сервиса**: завершить работу службы.
3. **Перезапуск сервиса**: сначала остановить, а потом заново запустить службу.
4. **Проверка статуса**: узнать текущее состояние службы.

Вот базовая структура команды:

```bash
sudo systemctl [действие] [имя_сервиса]
```

### Запуск и остановка сервиса

**Запуск:**

Представьте, что вы установили веб-сервер `nginx` и хотите запустить его. Именно для этого используется команда `start`:

```bash
sudo systemctl start nginx
```

**Остановка:**

Но что, если вы хотите временно отключить веб-сервер? Вас спасёт команда `stop`:

```bash
sudo systemctl stop nginx
```

### Перезапуск сервиса

Перезапуск нужен, чтобы применить изменения в конфигурации или просто "освежить" сервис (грубо говоря, дать ему кофе и напомнить, что пора работать). Используйте команду `restart`:

```bash
sudo systemctl restart nginx
```

### Проверка статуса

Вы не уверены, работает ли `nginx`? Команда `status` предоставит исчерпывающую информацию:

```bash
sudo systemctl status nginx
```

На выходе вы увидите:

- Уникальный идентификатор процесса (PID).
- Время запуска.
- Логи ошибок, если что-то пошло не так.

Пример вывода:

```text
nginx.service - A high performance web server
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)
   Active: active (running) since Tue 2023-11-01 09:00:00 UTC; 10min ago
   ...
```


## Автозапуск сервисов

### Включение автозапуска

Чтобы сервис автоматически запускался каждый раз при старте системы, используйте:

```bash
sudo systemctl enable nginx
```

### Отключение автозапуска

А если вы хотите, чтобы сервис больше не стартовал при загрузке:

```bash
sudo systemctl disable nginx
```

Вот простой способ проверить, включён ли автозапуск:

```bash
systemctl is-enabled nginx
```

---

### Практика управления сервисами

Давайте проведём комплексное упражнение на примере службы `cron`.

1. **Запустите службу `cron`**:
    
    ```bash
    sudo systemctl start cron
    ```
    
2. **Проверьте, работает ли она**:
    
    ```bash
    sudo systemctl status cron
    ```
    
    Убедитесь, что статус "active (running)".
    
3. **Остановите службу `cron`**:
    
    ```bash
    sudo systemctl stop cron
    ```
    
    Проверьте, что статус изменился на "inactive (dead)".
    
4. **Перезапустите службу `cron`**:
    
    ```bash
    sudo systemctl restart cron
    ```
##  Различие между активными, отключёнными и аварийно завершёнными сервисами

Сервисы могут иметь разные состояния. Вот их основные типы:

1. **Active (running)** — сервис активно работает; всё в порядке.
2. **Inactive (dead)** — сервис остановлен.
3. **Failed** — произошла ошибка при запуске, остановке или выполнении сервиса.

Чтобы быстро найти все службы, которые находятся в состоянии ошибки, используйте:

```bash
systemctl --failed
```

